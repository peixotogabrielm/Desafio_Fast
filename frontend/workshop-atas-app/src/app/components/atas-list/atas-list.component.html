<div class="atas-container">
  <div class="header">
    <h1>Atlas dos Workshops</h1>
    <p>Visualize e gerencie as atas de presen√ßa dos workshops</p>
  </div>

  <!-- Filtros -->
  <div class="filtros-container">
    <form [formGroup]="filtroForm" class="filtros-form">
      <div class="filtro-item">
        <label for="colaborador">Colaborador:</label>
        <input
          type="text"
          id="colaborador"
          formControlName="colaborador"
          placeholder="Digite o nome do colaborador"
          class="form-input"
        />
      </div>

      <div class="filtro-item">
        <label for="workshop">Workshop:</label>
        <input
          type="text"
          id="workshop"
          formControlName="workshop"
          placeholder="Digite o nome do workshop"
          class="form-input"
        />
      </div>

      <div class="filtro-item">
        <label for="data">Data do Workshop:</label>
        <input
          type="date"
          id="data"
          formControlName="data"
          class="form-input"
        />
      </div>

      <div class="filtro-actions">
        <button type="button" (click)="limparFiltros()" class="btn btn-secondary">
          Limpar Filtros
        </button>
      </div>
    </form>
  </div>

  <!-- Lista de Atas -->
  <div class="atas-lista">
    <div *ngIf="atas$ | async as atas; else loading">
      <div *ngIf="atas.length > 0; else noResults" class="atas-grid">
        <div *ngFor="let ata of atas" class="ata-card">
          <div class="ata-header">
            <h3
              class="workshop-nome clickable"
              (click)="verDetalhesWorkshop(ata.workshop.id)"
            >
              {{ata.workshop.nome}}
            </h3>
            <span class="workshop-data">{{formatarData(ata.workshop.dataRealizacao)}}</span>
          </div>

          <div class="ata-content">
            <p class="workshop-descricao">{{ata.workshop.descricao}}</p>

            <div class="colaboradores-section">
              <h4>Colaboradores Presentes:</h4>
              <div class="colaboradores-list">
                <span
                  *ngFor="let colaborador of ata.colaboradores; let last = last"
                  class="colaborador-tag"
                >
                  {{colaborador.nome}}<span *ngIf="!last">, </span>
                </span>
              </div>
              <span class="total-colaboradores">
                Total: {{ata.colaboradores.length}} participante(s)
              </span>
            </div>
          </div>
        </div>
      </div>

      <ng-template #noResults>
        <div class="no-results">
          <h3>Nenhuma ata encontrada</h3>
          <p>Tente ajustar os filtros para encontrar o que procura.</p>
        </div>
      </ng-template>
    </div>

    <ng-template #loading>
      <div class="loading">
        <p>Carregando atas...</p>
      </div>
    </ng-template>
  </div>
</div>
